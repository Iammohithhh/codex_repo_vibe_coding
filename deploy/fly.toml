# fly.toml app configuration for Paper2Product 2.0
# See https://fly.io/docs/reference/configuration/

app = "p2p-backend"
primary_region = "iad"

[env]
PORT = "8080"
ENVIRONMENT = "production"
PYTHONUNBUFFERED = "1"

[http_service]
internal_port = 8080
force_https = true
auto_stop = true
auto_start = true

[http_service.concurrency]
type = "connections"
hard_limit = 25
soft_limit = 20

[http_service.http_checks]
enabled = true
interval = "10s"
timeout = "5s"
grace_period = "10s"
method = "GET"
path = "/openapi.json"

[[services]]
protocol = "tcp"
internal_port = 8080

[services.concurrency]
type = "connections"
hard_limit = 25

[[vm]]
memory = "512mb"
cpus = 1
